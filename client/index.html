<html>

  <head>

    <style>
      body {
        font-family: "DejaVu Sans Bold", sans-serif;

        min-height: 100%;
        margin: 0;
        padding: 0;
        color: #4e4e4e;
        top: -15px;
        position: relative;
      }
    </style>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io();

      var state = {};

      function setup_display(data) {
        socket.on(data, function(msg) {
          var el = document.getElementById(data.toLowerCase());
          if (el) {
            el.innerText = msg;
          }
          state[data.toLowerCase()] = msg;

          window.dispatchEvent(new CustomEvent('state_update', { state:  state }));
        });
      }

      setup_display('ACCELERATOR');
      setup_display('BRAKE');
      setup_display('STEERING');
      setup_display('CAN_SPEED');
      setup_display('WHEEL_SPEED_LF');
      setup_display('WHEEL_SPEED_RF');
      setup_display('WHEEL_SPEED_LR');
      setup_display('WHEEL_SPEED_RR');
      setup_display('TURN_SIGNAL');
      setup_display('LIGHTS');
      setup_display('VEHICLE_SPEED');
      setup_display('ENGINE_RPM');
      setup_display('MAF_RATE');
      setup_display('INTAKE_PRESSURE');
      setup_display('OXYGEN_SENSOR');
      setup_display('BAROMETRIC_PRESSURE');
      setup_display('FUEL_LEVEL');
      setup_display('COOLANT_TEMPERATURE');
      setup_display('ENGINE_LOAD');
      setup_display('OIL_TEMPERATURE');
      setup_display('AMBIENT_AIR_TEMPERATURE');
      setup_display('TIMING_ADVANCE');
      setup_display('CATALYST_TEMPERATURE');
      setup_display('ACCELERATOR_PEDAL_POSITON');
      setup_display('EVAP_SYSTEM_PRESSURE');
      setup_display('INTAKE_AIR_TEMPERATURE');
      setup_display('FUEL_PRESSURE');
      setup_display('TIMING_ADVANCE');
      setup_display('THROTTLE_POSITION');
      setup_display('ABSOLUTE_LOAD');
      setup_display('FUEL_RATE');
    </script>
  </head>

  <body>
    <div>
      <p>CAN</p>
      <p>Accelerator pressure: <span id="accelerator"></span>%</p>
      <p>Brake pressure: <span id="brake"></span>%</p>
      <p>Steering wheel position: <span id="steering"></span></p>
      <!--<p>Speed: <span id="can_speed"></span> km/h</p>-->
      <p>Wheel Speeds (LF RF LR RR):<br />
        <span id="wheel_speed_lf"></span> km/h<br />
        <span id="wheel_speed_rf"></span> km/h<br />
        <span id="wheel_speed_lr"></span> km/h<br />
        <span id="wheel_speed_rr"></span> km/h
      </p>
      <p>Turn signal: <span id="turn_signal"></span></p>
      <p>Lights: <span id="lights"></span></p>
      <p>&nbsp;</p>

      <p>OBD</p>
      <p>Engine RPM: <span id="engine_rpm"></span> rpm</p>
      <p>Speed: <span id="vehicle_speed"></span> km/h</p>
      <p>MAF rate: <span id="maf_rate"></span> grams/sec</p>
      <p>Intake pressure: <span id="intake_pressure"></span> kPa</p>
      <p>Oxygen sensor: <span id="oxygen_sensor"></span></p>
      <p>Barometric pressure: <span id="barometric_pressure"></span> kPa</p>
      <p>Fuel level: <span id="fuel_level"></span>%</p>
      <p>Coolant temperature: <span id="coolant_temperature"></span>&deg;C</p>
      <p>Engine load: <span id="engine_load"></span>%</p>
      <p>Oil temperature: <span id="oil_temperature"></span>&deg;C</p>
      <p>Ambient air temperature: <span id="ambient_air_temperature"></span>&deg;C</p>
      <p>Timing advance: <span id="timing_advance"></span></p>
      <p>Catalyst temperature: <span id="catalyst_temperature"></span>&deg;C</p>
      <p>Engine runtime: <span id="engine_runtime"></span> sec</p>
      <p>Accelerator pedal position: <span id="accelerator_pedal_positon"></span>%</p>
      <p>Evap. system pressure: <span id="evap_system_pressure"></span> Pa</p>
      <p>Intake air temperature: <span id="intake_air_temperature"></span>&degC;</p>
      <p>Fuel pressure: <span id="fuel_pressure"></span> kPa</p>
      <p>Timing advance: <span id="timing_advance"></span>&deg;</p>
      <p>Throttle position: <span id="throttle_position"></span>%</p>
      <p>Absolute load: <span id="absolute_load"></span>%</p>
      <p>Fuel rate: <span id="fuel_rate"></span> L/h</p>
    </div>
		<script src="app.js"></script>
  </body>

</html>
